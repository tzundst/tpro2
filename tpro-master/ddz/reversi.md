# Долгосрочное домашнее задание (игра "Реверси")

## Этап I
Время на этап: **18 часов**

### Цель

Необходимо разработать игру для одного пользователя против компьютера. Правила для различных вариантов игры можно найти в интернете (например, в Википедии) и ниже в ТЗ.

### Задание

На этом этапе необходимо реализовать desktop-приложение c графической отрисовкой процесса игры и реализацией основной логики игры.

#### Функционал, который должен быть реализован:
1. Игровое меню
    * кнопка **Начать** - открывает новое окно с настройками игры:
        * выбор **количества раундов** или **быструю игру (1 раунд)**
        * выбор **цвета** фишек, за которые играет пользователь
        * кнопка "Начать игру"
    * кнопка **Настройки** - открывает новое окно с настройками:
        * выбором **имени** игрока
        * выбором **оформления** доски и фишек
        * кнопка "Сохранить" сохраняет настройки и выходит в предыдущее меню
    * кнопка **О создателях** - показывает экран с именами создателей игры;
    * кнопка **Выход** - выдаёт диалоговое окно "Хотите выйти из игры?" с вариантами действий по выходу из игры или возврату в игру.
2. Игровой процесс
    * отрисовка доски и фигур на экране, выделение фигуры (рамки вокруг фигуры) после нажатия на неё, выделение доступных клеток для совершения хода (реализация одного из правил игры), выставление фишек на доступных для хода клетках
    * изменение цвета ряда фишек после успешного хода противника (реализация одного из правил игры)
    * реализация алгоритма поведения бота-противника (компьютера)
    * реализация алгоритма определения конца игры
    * запрос статистики и её визуализация
    * возможность поставить игру на паузу с отображением **диалогового окна**:
        * кнопка **Возобновить игру**
        * кнопка **Выйти из игры** - возврат в основное меню программы
        * кнопка **Рестарт** - запуск игры заново с теми же параметрами
    * визуальная часть:
        * отображение **времени** игры
        * отображение **счета** раунда (например, соотношение фишек)
        * отображение **счёта** игры (если это многораундовая игра)
        * отображение **счётчика раундов** (если это многораундовая игра)
        * отображение **имени** игрока
    * по завершении игры вывод **диалогового окна**:
        * **имя** победителя
        * **счёт игры**, если это игра с несколькими раундами
        * кнопки **Выход** или **Рестарт**
    * логика игры:
        * **Базовые правила для всех вариантов игры:**
            - В игре используется квадратная доска размером 8 × 8 клеток (все клетки могут быть одного цвета) и 64 специальные фишки, окрашенные с разных сторон в контрастные цвета, например, в белый и чёрный. Один из игроков играет белыми, другой — чёрными. Делая ход, игрок ставит фишку на клетку доски «своим» цветом вверх.
            - В начале игры в центр доски выставляются 4 фишки: чёрные на d5 и e4, белые на d4 и e5.
            - Первый ход делают **чёрные**. Далее игроки ходят по очереди.
            - Делая ход, игрок должен поставить свою фишку на одну из клеток доски таким образом, чтобы между этой поставленной фишкой и одной из имеющихся уже на доске фишек его цвета находился **непрерывный ряд фишек соперника**, горизонтальный, вертикальный или диагональный (другими словами, чтобы непрерывный ряд фишек соперника оказался «закрыт» фишками игрока с двух сторон). Все фишки соперника, входящие в «закрытый» на этом ходу ряд, переворачиваются на другую сторону (меняют цвет) и переходят к ходившему игроку.
            - Если в результате одного хода «закрывается» одновременно более одного ряда фишек противника, то переворачиваются **все** фишки, оказавшиеся на всех «закрытых» рядах.
            - Игрок вправе выбирать **любой** из возможных для него ходов. Если игрок имеет возможные ходы, он **не может** отказаться от хода. Если игрок не имеет допустимых ходов, то ход передаётся сопернику.
            - Игра прекращается, когда на доску выставлены все фишки или когда ни один из игроков не может сделать хода. По окончании игры проводится подсчёт фишек каждого цвета, и игрок, чьих фишек на доске выставлено больше, объявляется победителем. В случае равенства количества фишек засчитывается **ничья**.
            - Помимо базовых правил, есть альтернативные (см. далее).
        * **Реверси NxN:**
            * Игра на поле NxN клеток. От игры 8 × 8 отличается тем, что фишки одного цвета в начале игры ставятся не в шахматном порядке, а рядом.
            - Существуют варианты реверси с размером поля 10 × 10 и больше. Они не отличаются от обычных ничем, кроме размера поля.
            * В целом, варианты размером меньше 8 × 8 не представляют интереса, поскольку являются детерминированными и при идеальной стратегии всегда выигрывает второй игрок (тот, кто ходит вторым).
        * **Антиреверси:**
            * Отличается от Реверси тем, что при подведении результатов игры выигрывает тот, у кого фишек меньше.
        * **Реверси с черной дырой:**
            * Отличается только тем, что одна из клеток доски (случайно выбирается в начале игры) помечается как «чёрная дыра». При этом на неё нельзя сделать ход, и фишки с одной стороны такой клетки не могут захватить фишки с другой.
        * в **раундовом сражении** побеждает тот игрок, который выиграл **наибольшее** число раундов
3. Конфигурация игры
    * все важные настройки игры хранить в файлах в любом удобном формате   
    * в настройках должна содержаться вся информация из вкладки **Настройки** игрового меню и различные параметры игрового процесса: вариант игры и т.п. При этом, в случае если конфигурационный файл отсутствует, необходимо прописать в коде **настройки по умолчанию**, либо иным разумным способом обработать эту ситуацию

### Подварианты (уточнение задания)
1. Обычные реверси
2. Реверси NxN
3. Антиреверси
4. Реверси с черной дырой

### Командная разработка

Далее пошагово представлен **пример** процесса реализации игры на этапе I. Каждый из членов команды выбирает себе задание,
согласовав этот шаг разработки с остальными участниками команды. Шаги разработки составлены так, что **лучше всего** для команды — полностью закрыть все задачи **конкретного** шага, прежде чем переходить к **следующему** шагу (тут вам потребуется командная работа).

На каждом шаге разработки ожидается **очевидный** промежуточный результат от команды. Команда должна иметь возможность отчитаться в любой момент о состоянии дел по разработке игры. Основное ТЗ можно посмотреть ещё раз
[тут](#функционал-который-должен-быть-реализован), подробное ТЗ будет расписано в каждом шаге.

#### Шаги разработки:

1. Время на работу: **6 часов**  

   * **Разработка макета визуальной части процесса игры и части главного меню**.  

     Необходимо разработать подробный макет (в любом из доступных средств визуализации макетов) основного экрана игры.
     На экране должны быть:
     * **имя игрока**
     * **время игры**
     * **счёт игры** (если это многораундовая игра);
     * **счётчик раундов** (если это многораундовая игра);
     * сама **доска**, по которой будут размещаться **фишки** (которые, разумеется, также необходимо отобразить). Очевидно, что всё это должно лаконично смотреться и не "накладываться" друг на друга.

     Для каждой отдельной кнопки меню необходимо сделать "подсвечивание" кнопки.

   * **Разработка основного меню игры**.  

     Необходимо разработать основное меню игры с кнопками: **Начать**, **Настройки** и **Выход** с указанным ранее функционалом.

     Для работы с настройками и их хранением в файле реализовать отдельный класс/модель для удобства работы.         

   Для этого шага разработки **результатом** является готовое меню с фоном. Каждая кнопка должна открывать своё окно, а все прописываемые в окнах параметры должны записываться в соответствующие поля конфигурационного файла или переменные программы, если их нет смысла хранить в файле.

2. Время на работу: **6 часов**  

   * **Визуализация окна игры**  

     На этом шаге необходимо отобразить на экран всё то, что было нанесено на макет на предыдущем шаге. На экране могут быть "заглушки". Главное, чтобы был реализован такой функционал, который позволит другому члену команды использовать прописанные игроками параметры (имена, цвета и т.д.), чтобы связать визуализацию с логикой.  

   * **Привязка визуальной составляющей к логике игры**  

     Необходимо написать функционал, который позволяет получать параметры, вводимые игроками на предыдущем шаге, чтобы использовать их для визуализации на экране и для реализации логики игры. Здесь необходимо параллельное взаимодействие двух членов команды, чтобы по итогу полученные на предыдущем шаге параметры игроков корректно отображались на экране игры.  

   * **Написание логики выставления фишек игрока и бота для базового варианта игры**

     Необходимо написать функционал, который отображает на экране фишки игрока и бота и позволяет им помещать на поле новые в соответствии с правилами **для базового варианта игры**. Необходимо написать функционал, позволяющий выставлять фишки игрока на доске. При выборе фишки игроком ее клетка должна определенным образом выделяться, а также должны некоторым образом выделяться клетки, доступные для хода. Также требуется учесть правила о необходимости "поедания" фишек противника при наличии такой возможности.

   Для этого шага разработки **результатом** является основное окно игры с отображенными параметрами на экране: имя игрока, время игры; доска с фишками игрока и бота на ней.
   Также должна быть реализована логика выставления фишек игрока и бота с возможностью управления.

3. Время на работу: **6 часов**

   * **Реализация поведения бота**

     Необходимо реализовать логику поведения бота: стремление побольше съесть или попытки лишить оппонента хода (наиболее популярные стратегии доступны, в частности, в Википедии).

     Возможен вариант выбора сложности бота (например, на более легких уровнях бот чаще, отклоняясь от основного алгоритма, совершает случайный ход).

   * **Реализация оставшихся вариантов игры**  

     Необходимо написать функционал, который позволяет игроку и боту выставлять фишки в соответствии с правилами **для выбранного из пула доступных варианта игры**. Требуется учитывать правила выбранного варианта игры при подсветке доступных для хода клеток и требовании "съесть" фишки противника.

     Также необходимо реализовать возможность выбора оформления доски и фишек. На прошлом шаге стояло значение "по умолчанию". Теперь необходимо учесть задание параметров из поля **Настройки** в главном меню.

   * **Реализация диалогового окна паузы**  

     Необходимо реализовать диалоговое окно, которое будет появляться при нажатии клавиши "ESC". В диалоговом окне необходимо отобразить информацию и кнопки, представленные ранее в ТЗ.

   * **Реализация диалогового окна по завершении игры**  

     Необходимо написать диалоговое окно, которое вызывается в случае завершения игры или раунда. При этом, для двух ситуаций диалоговые окна отличаются. В случае, когда был сыгран один из раундов (когда играется многораундовая игра), но не конечный, отображается временное окно, в котором указывается:
       * **имя** победителя раунда
       * **счёт игры**

     Временное окно должно исчезать через какое-то разумное время (можно добавить эффект "растворения" окна, когда постепенно снижается его прозрачность), фишки игроков должны расставляться заново, время обновляться, а счётчик раундов и сам счёт — изменяться.

     В случае, когда сыграна **быстрая** игра или это был финальный раунд **многораундовой** игры, необходимо показывать диалоговое окно, в котором указывается:
       * **имя** победителя игры
       * **счёт игры**, если это игра с несколькими раундами (в случае быстрой игры этот пункт не учитывать)
       * кнопка **Выйти из игры**, возвращающая игроков в главное меню
       * кнопка **Рестарт**, начинающая игру с самого начала, сохраняя все заданные параметры, но обнуляя счет, время и т.п. Стартовая расстановка игроков на доске не должна меняться, однако игроку следует предлагать выбор цвета шашек.

     Важно учесть, что многораундовая игра может закончиться раньше, чем количество раундов (к примеру, когда раундов 5, а один из игроков выиграл уже 3 раунда подряд, тогда доигрывать 2 раунда не имеет смысла).

   Для этого шага разработки **результатом** является реализованная логика выставления фишек игроков для *ВСЕХ* вариантов игры, а также вывод всех сопутствующих **работающих** диалоговых окон в случае завершения игры/раунда или паузы (нажатие на клавишу "ESC"). При этом, должно работать изменение оформления доски и фишек, задаваемое в **Настройках** игры, а также изменение счётчика раундов и счёта (в случае многораундовой игры). На этом шаге игра должна выглядеть готовой для комфортной **быстрой** или **многораундовой** игры.


## Этап II
Время на этап: **18 часов**

### Цель

Необходимо разработать многопользовательскую (на 2 игрока) версию игры.

В этот этап необходимо включить:
* Выбор количество игроков - 1 или 2 при начале игры
* Ввод имени для второго игрока в настройках
* Добавление возможности для каждого из игроков предложить ничью, в второму — согласиться или отказаться
* Запись статистики в отдельный файл по игрокам и вывод статистики при нажатии клавиши **Статистика** в главном меню

Функционал и задачи определить самостоятельно аналогично первому этапу. Второй этап — это развитие первого этапа в многопользовательском режиме.
